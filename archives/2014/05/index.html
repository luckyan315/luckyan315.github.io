<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Archives: 2014/5 | An&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta content="website" property="og:type">
<meta content="An's Blog" property="og:title">
<meta content="http://luckyan315.github.io/archives/2014/05/" property="og:url">
<meta property="og:image">
<meta content="An's Blog" property="og:site_name">
<meta property="og:description">
<meta content="summary" name="twitter:card">
  
    <link rel="alternative" href="/atom.xml" title="An&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="http://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">An&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="submit" value="&#xF002;" class="search-form-submit"><input type="hidden" name="q" value="site:http://luckyan315.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-用emacs打造nodejs开发环境" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/10/用emacs打造nodejs开发环境/" class="article-date">
  <time datetime="2014-05-10T14:15:41.000Z" itemprop="datePublished">May 10 2014</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/10/用emacs打造nodejs开发环境/">用emacs打造node.js开发环境</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="简介">简介</h1>
<p>之前的因为项目用node来构建，网上搜集了相关的插件，涉及到整个开发流程，共大家参考<br>以下所有涉及到的文件，都可以在 <a href="https://github.com/luckyan315/site-lisp" target="_blank">https://github.com/luckyan315/site-lisp</a> 这里找到^^</p>
<h1 id="javascript_/_node-js_语法相关">javascript / node.js 语法相关</h1>
<h2 id="js2-mode">js2-mode</h2>
<p>对于使用emacs来开发javascript的人来说js2-mode应该是必备神器，此工具可以提示js语法错误，<br>并用红色下滑线给予提示(当初像我这样js语法都没有过关的人来讲确实帮助挺大的^^)<br>配置过程：</p>
<pre><code><span class="variable">$ </span>svn checkout <span class="symbol">http:</span>/<span class="regexp">/js2-mode.googlecode.com/svn</span><span class="regexp">/trunk/</span> js2-mode
<span class="variable">$ </span>cd js2-mode
<span class="variable">$ </span>emacs --batch -f batch-byte-compile js2-mode.el
<span class="variable">$ </span>cp js2-mode.elc ~<span class="regexp">/.emacs.d/</span>
</code></pre><p><strong>有的童鞋可能会问怎么修改~/.emacs 文件，下面我会一起提供</strong></p>
<h2 id="espresso">espresso</h2>
<p>刚接触node的人对缩进会有些头痛，这个插件就帮我们搞定node的缩进</p>
<pre><code>$wget http://download<span class="preprocessor">.savannah</span><span class="preprocessor">.gnu</span><span class="preprocessor">.org</span>/releases-noredirect/espresso/espresso<span class="preprocessor">.el</span>
$<span class="keyword">cp</span> ./espresso<span class="preprocessor">.el</span> ~/<span class="preprocessor">.emacs</span><span class="preprocessor">.d</span>/
</code></pre><p><strong>因为使用espresso的时候可能会跟yasnippet的快捷键冲突，建议大家按照下面进行修改</strong><br>首先创建nodejs.el文件</p>
<pre><code>$touch ~/<span class="preprocessor">.emacs</span><span class="preprocessor">.d</span>/nodejs<span class="preprocessor">.el</span>
</code></pre><p>把以下内容拷贝到nodejs.el里面</p>
<pre><code><span class="comment">;;;; load &amp; configure js2-mode </span>
<span class="list">(<span class="title">autoload</span> 'js2-mode <span class="string">"js2-mode"</span> <span class="literal">nil</span> t)</span>
<span class="list">(<span class="title">add-to-list</span> 'auto-mode-alist '<span class="list">(<span class="string">"\\.js$"</span> . js2-mode)</span>)</span>

<span class="comment">;;; espresso mode</span>
<span class="list">(<span class="title">autoload</span> 'espresso-mode <span class="string">"espresso"</span>)</span>

<span class="list">(<span class="title">add-hook</span> 'js2-mode-hook
<span class="list">(<span class="title">lambda</span> <span class="list">()</span>
<span class="list">(<span class="title">yas-global-mode</span><span class="number"> 1</span>)</span>)</span>)</span>

<span class="list">(<span class="title">eval-after-load</span> 'js2-mode
'<span class="list">(<span class="title">progn</span>
<span class="list">(<span class="title">define-key</span> js2-mode-map <span class="list">(<span class="title">kbd</span> <span class="string">"TAB"</span>)</span> <span class="list">(<span class="title">lambda</span><span class="list">()</span>
<span class="list">(<span class="title">interactive</span>)</span>
<span class="list">(<span class="title"><span class="built_in">let</span></span> <span class="list">(<span class="list">(<span class="title">yas/fallback-behavior</span> 'return-<span class="literal">nil</span>)</span>)</span>
<span class="list">(<span class="title">unless</span> <span class="list">(<span class="title">yas/expand</span>)</span>
<span class="list">(<span class="title">indent-for-tab-command</span>)</span>
<span class="list">(<span class="title"><span class="built_in">if</span></span> <span class="list">(<span class="title">looking-back</span> <span class="string">"^\s*"</span>)</span>
<span class="list">(<span class="title">back-to-indentation</span>)</span>)</span>)</span>)</span>)</span>)</span>)</span>)</span>

<span class="list">(<span class="title">defun</span> my-js2-indent-function <span class="list">()</span>
<span class="list">(<span class="title">interactive</span>)</span>
<span class="list">(<span class="title">save-restriction</span>
<span class="list">(<span class="title">widen</span>)</span>
<span class="list">(<span class="title">let*</span> <span class="list">(<span class="list">(<span class="title">inhibit-point-motion-hooks</span> t)</span>
<span class="list">(<span class="title">parse-status</span> <span class="list">(<span class="title">save-excursion</span> <span class="list">(<span class="title">syntax-ppss</span> <span class="list">(<span class="title">point-at-bol</span>)</span>)</span>)</span>)</span>
<span class="list">(<span class="title">offset</span> <span class="list">(<span class="title"><span class="built_in">-</span></span> <span class="list">(<span class="title">current-column</span>)</span> <span class="list">(<span class="title">current-indentation</span>)</span>)</span>)</span>
<span class="list">(<span class="title">indentation</span> <span class="list">(<span class="title">espresso--proper-indentation</span> parse-status)</span>)</span>
node)</span>

<span class="list">(<span class="title">save-excursion</span>

<span class="comment">;; I like to indent case and labels to half of the tab width</span>
<span class="list">(<span class="title">back-to-indentation</span>)</span>
<span class="list">(<span class="title"><span class="built_in">if</span></span> <span class="list">(<span class="title">looking-at</span> <span class="string">"case\\s-"</span>)</span>
<span class="list">(<span class="title">setq</span> indentation <span class="list">(<span class="title"><span class="built_in">+</span></span> indentation <span class="list">(<span class="title"><span class="built_in">/</span></span> espresso-indent-level<span class="number"> 2</span>)</span>)</span>)</span>)</span>

<span class="comment">;; consecutive declarations in a var statement are nice if</span>
<span class="comment">;; properly aligned, i.e:</span>
<span class="comment">;;</span>
<span class="comment">;; var foo = "bar",</span>
<span class="comment">;; bar = "foo";</span>
<span class="list">(<span class="title">setq</span> node <span class="list">(<span class="title">js2-node-at-point</span>)</span>)</span>
<span class="list">(<span class="title"><span class="built_in">when</span></span> <span class="list">(<span class="title"><span class="built_in">and</span></span> node
<span class="list">(<span class="title"><span class="built_in">=</span></span> js2-NAME <span class="list">(<span class="title">js2-node-type</span> node)</span>)</span>
<span class="list">(<span class="title"><span class="built_in">=</span></span> js2-VAR <span class="list">(<span class="title">js2-node-type</span> <span class="list">(<span class="title">js2-node-parent</span> node)</span>)</span>)</span>)</span>
<span class="list">(<span class="title">setq</span> indentation <span class="list">(<span class="title"><span class="built_in">+</span></span><span class="number"> 4</span> indentation)</span>)</span>)</span>)</span>

<span class="list">(<span class="title">indent-line-to</span> indentation)</span>
<span class="list">(<span class="title"><span class="built_in">when</span></span> <span class="list">(<span class="title">&gt;</span> offset<span class="number"> 0</span>)</span> <span class="list">(<span class="title">forward-char</span> offset)</span>)</span>)</span>)</span>)</span>

<span class="list">(<span class="title">defun</span> my-indent-sexp <span class="list">()</span>
<span class="list">(<span class="title">interactive</span>)</span>
<span class="list">(<span class="title">save-restriction</span>
<span class="list">(<span class="title">save-excursion</span>
<span class="list">(<span class="title">widen</span>)</span>
<span class="list">(<span class="title">let*</span> <span class="list">(<span class="list">(<span class="title">inhibit-point-motion-hooks</span> t)</span>
<span class="list">(<span class="title">parse-status</span> <span class="list">(<span class="title">syntax-ppss</span> <span class="list">(<span class="title">point</span>)</span>)</span>)</span>
<span class="list">(<span class="title">beg</span> <span class="list">(<span class="title"><span class="built_in">nth</span></span><span class="number"> 1</span> parse-status)</span>)</span>
<span class="list">(<span class="title">end-marker</span> <span class="list">(<span class="title">make-marker</span>)</span>)</span>
<span class="list">(<span class="title">end</span> <span class="list">(<span class="title">progn</span> <span class="list">(<span class="title">goto-char</span> beg)</span> <span class="list">(<span class="title">forward-list</span>)</span> <span class="list">(<span class="title">point</span>)</span>)</span>)</span>
<span class="list">(<span class="title">ovl</span> <span class="list">(<span class="title">make-overlay</span> beg end)</span>)</span>)</span>
<span class="list">(<span class="title">set-marker</span> end-marker end)</span>
<span class="list">(<span class="title">overlay-put</span> ovl 'face 'highlight)</span>
<span class="list">(<span class="title">goto-char</span> beg)</span>
<span class="list">(<span class="title"><span class="built_in">while</span></span> <span class="list">(<span class="title"><span class="built_in">&lt;</span></span> <span class="list">(<span class="title">point</span>)</span> <span class="list">(<span class="title">marker-position</span> end-marker)</span>)</span>
<span class="comment">;; don't reindent blank lines so we don't set the "buffer</span>
<span class="comment">;; modified" property for nothing</span>
<span class="list">(<span class="title">beginning-of-line</span>)</span>
<span class="list">(<span class="title">unless</span> <span class="list">(<span class="title">looking-at</span> <span class="string">"\\s-*$"</span>)</span>
<span class="list">(<span class="title">indent-according-to-mode</span>)</span>)</span>
<span class="list">(<span class="title">forward-line</span>)</span>)</span>
<span class="list">(<span class="title">run-with-timer</span><span class="number"> 0.5</span> <span class="literal">nil</span> '<span class="list">(<span class="title">lambda</span><span class="list">(<span class="title">ovl</span>)</span>
<span class="list">(<span class="title">delete-overlay</span> ovl)</span>)</span> ovl)</span>)</span>)</span>)</span>)</span>

<span class="list">(<span class="title">defun</span> my-js2-mode-hook <span class="list">()</span>
<span class="list">(<span class="title">require</span> 'espresso)</span>
<span class="list">(<span class="title">setq</span> espresso-indent-level<span class="number"> 2</span>
indent-tabs-mode <span class="literal">nil</span>
c-basic-offset<span class="number"> 2</span>)</span>
<span class="list">(<span class="title">c-toggle-auto-state</span><span class="number"> 0</span>)</span>
<span class="list">(<span class="title">c-toggle-hungry-state</span><span class="number"> 1</span>)</span>
<span class="list">(<span class="title">set</span> <span class="list">(<span class="title">make-local-variable</span> 'indent-line-function)</span> 'my-js2-indent-function)</span>
<span class="list">(<span class="title">define-key</span> js2-mode-map <span class="collection">[<span class="list">(<span class="title"><span class="built_in">meta</span></span> control |)</span>]</span> 'cperl-lineup)</span>
<span class="list">(<span class="title">define-key</span> js2-mode-map <span class="collection">[<span class="list">(<span class="title"><span class="built_in">meta</span></span> control \<span class="comment">;)]</span>
'<span class="list">(<span class="title">lambda</span><span class="list">()</span>
<span class="list">(<span class="title">interactive</span>)</span>
<span class="list">(<span class="title">insert</span> <span class="string">"/* -----[ "</span>)</span>
<span class="list">(<span class="title">save-excursion</span>
<span class="list">(<span class="title">insert</span> <span class="string">" ]----- */"</span>)</span>)</span>
)</span>)</span>
<span class="list">(<span class="title">define-key</span> js2-mode-map <span class="collection">[<span class="list">(<span class="title">return</span>)</span>]</span> 'newline-and-indent)</span>
<span class="list">(<span class="title">define-key</span> js2-mode-map <span class="collection">[<span class="list">(<span class="title">backspace</span>)</span>]</span> 'c-electric-backspace)</span>
<span class="list">(<span class="title">define-key</span> js2-mode-map <span class="collection">[<span class="list">(<span class="title">control</span> d)</span>]</span> 'c-electric-delete-forward)</span>
<span class="list">(<span class="title">define-key</span> js2-mode-map <span class="collection">[<span class="list">(<span class="title">control</span> meta q)</span>]</span> 'my-indent-sexp)</span>
<span class="list">(<span class="title"><span class="built_in">if</span></span> <span class="list">(<span class="title">featurep</span> 'js2-highlight-vars)</span>
<span class="list">(<span class="title">js2-highlight-vars-mode</span>)</span>)</span>
<span class="list">(<span class="title">message</span> <span class="string">"My JS2 hook"</span>)</span>)

<span class="list">(<span class="title">add-hook</span> 'js2-mode-hook 'my-js2-mode-hook)</span>

<span class="list">(<span class="title">provide</span> 'nodejs)</span></span></span></span>
</code></pre><p>然后最后修改~/.emacs 文件,增加以下内容</p>
<pre><code><span class="list">(<span class="title">require</span> 'nodejs)</span>
</code></pre><h2 id="exuberant-ctags_提供类似Go_To_Definition_功能">exuberant-ctags 提供类似Go To Definition 功能</h2>
<p>此工具给我们提供跳到函数定义处类似的功能 , 不过如果出现同名函数的话还是会出现误跳的现象。</p>
<p>所以如果对函数名命名的时候多加考虑的话一般还是可以准确的跳转到定义处的。</p>
<pre><code><span class="variable">$sudo</span> apt<span class="attribute">-get</span> install exuberant<span class="attribute">-ctags</span>
<span class="variable">$cd</span> your_project_dir
<span class="variable">$ctags</span> <span class="attribute">-e</span> <span class="subst">--</span>recurse (跟目录下会创建TAGS索引文件)
打开编辑器， 光标移动到要找的函数名处， <span class="string">"M-."</span> 触发查找<span class="built_in">tag</span>命令, 第一次会让你选择索引文件，就把刚才创建的TAGS文件找出来打开就可以了。
</code></pre><h2 id="js2-highlight-vars_作用域内变量的_highlight_功能">js2-highlight-vars 作用域内变量的 highlight 功能</h2>
<p>当写node的时候嵌套很多层，有时候自己也犯迷糊，所以自动高亮显示光标所在变量的话也会很有帮助的</p>
<pre><code>$wget http://mihai<span class="preprocessor">.bazon</span><span class="preprocessor">.net</span>/projects/editing-javascript-with-emacs-js2-mode/js2-highlight-vars-mode/js2-highlight-vars<span class="preprocessor">.el</span>
$<span class="keyword">cp</span> js2-highlight-vars<span class="preprocessor">.el</span> ~/<span class="preprocessor">.emacs</span><span class="preprocessor">.d</span>
</code></pre><p>修改~/.emacs文件</p>
<pre><code><span class="comment">;; ;;js2-highlight vars</span>
<span class="list">(<span class="title">require</span> 'js<span class="number">2</span>-highlight-vars)</span>
<span class="list">(<span class="title">if</span> <span class="list">(<span class="title">featurep</span> 'js<span class="number">2</span>-highlight-vars)</span>
    <span class="list">(<span class="title">js2-highlight-vars-mode</span>)</span>)</span>
</code></pre><h2 id="coffeescript_mode">coffeescript mode</h2>
<p>最近工作需要，需要用到coffeescript (<a href="https://github.com/defunkt/coffee-mode" target="_blank">https://github.com/defunkt/coffee-mode</a>),<br>使用emacs23版本的人用coffeescript 0.4.1<br>使用emacs24的人直接用最新版本即可<br>不多说，配置如下(因为我自己用23版本，就下载0.4.1版本为例):</p>
<pre><code><span class="variable">$cd</span> ~<span class="regexp">/.emacs.d/</span>
<span class="variable">$wget</span> <span class="symbol">https:</span>/<span class="regexp">/github.com/luckyan</span>315/site-lisp/raw/master/site-lisp/coffee-mode.el
</code></pre><p>修改~/.emacs</p>
<pre><code><span class="comment">;; coffeescript</span>
<span class="list">(<span class="title">require</span> 'coffee-mode)</span>
<span class="list">(<span class="title">add-to-list</span> 'auto-mode-alist <span class="quoted">'(<span class="string">"\.coffee$"</span> . coffee-mode)</span>)</span> 
<span class="list">(<span class="title">add-to-list</span> 'auto-mode-alist <span class="quoted">'(<span class="string">"Cakefile"</span> . coffee-mode)</span>)</span> 
<span class="comment">;; 保存文件时自动compile: </span>
<span class="list">(<span class="title">add-hook</span> 'coffee-mode-hook <span class="quoted">'(lambda () (coffee-cos-mode <span class="literal">t</span>))</span>)</span> 
</code></pre><h1 id="其他各种通用神器">其他各种通用神器</h1>
<p>介绍通用的emacs写代码必备神器， 相信你肯定也需要^^</p>
<h2 id="ido-mode">ido-mode</h2>
<p>很多人是不是因为“C-x C-f”因为有大小写区分而苦恼&#x2026;苦了我们的小指去按住个”Shift”&#x2026;<br>这个插件就会让我们只要输入文件名的片断就能定位到文件夹和文件名， 非常便利<br>把以下内容，插入到~/.emacs的某个角落</p>
<pre><code><span class="list">(<span class="title">setq</span> ido-enable-flex-matching <span class="literal">t</span>)</span>
<span class="list">(<span class="title">setq</span> ido-everywhere <span class="literal">t</span>)</span>
<span class="list">(<span class="title">ido-mode</span> <span class="number">1</span>)</span>
<span class="list">(<span class="title">setq</span> ido-use-filename-at-point 'guess)</span>
</code></pre><p>无论”C-x C-f” 打开文件/文件夹, 还是用”C-x b” 打开buffer files,<br>只要输入名字片断如果几个匹配的选项中已经在第一个位置的话直接回车就能<br>打开文件，或者按下tab就能直接打开文件了 , 恢常方便^^</p>
<h2 id="session_/_desktop_mode">session / desktop mode</h2>
<p>程序猿一般不喜欢关机的原因无非就是想保存开发时候的上下文， 具体来说就是打开的文件， 光标所在位置， 剪贴板内容<br>上次修改的cursor位置，当前编辑器的layout 等等&#x2026;<br>session mode 和 desktop 配合起来就能完美解决保存emacs 上下文的问题</p>
<pre><code><span class="variable">$cd</span> ~<span class="regexp">/.emacs.d/site</span>-lisp
<span class="variable">$wget</span> <span class="symbol">http:</span>/<span class="regexp">/www.emacswiki.org/emacs</span><span class="regexp">/download/session</span>.el
</code></pre><p>把以下内容贴到~/.emacs里面</p>
<pre><code><span class="list">(<span class="title">require</span> 'session)</span>
<span class="list">(<span class="title">add-hook</span> 'after-init-hook 'session-initialize)</span>

<span class="list">(<span class="title"><span class="built_in">load</span></span> <span class="string">"desktop"</span>)</span>
<span class="list">(<span class="title">desktop-load-default</span>)</span>
<span class="list">(<span class="title">desktop-read</span>)</span>
</code></pre><h2 id="find-file-suggest">find-file-suggest</h2>
<p>遇到多级项目工程目录结构，是否“C-x C-f” 按到手痛？或者添加 bookmark ?</p>
<p>这个插件就是帮我们索引项目文件的，就像source insight那样，只要输入文件名任意字段(当然支持RegExp)，就帮你定位到那个文件里。</p>
<p>配置过程：</p>
<pre><code><span class="variable">$wget</span> https:<span class="comment">//find-file-suggest.googlecode.com/files/find-file-suggest_2010-03-02.zip</span>
<span class="variable">$unzip</span> find<span class="attribute">-file</span><span class="attribute">-suggest_2010</span><span class="subst">-</span><span class="number">03</span><span class="subst">-</span><span class="number">02.</span>zip
<span class="variable">$cp</span> find<span class="attribute">-file</span><span class="attribute">-suggest_2010</span><span class="subst">-</span><span class="number">03</span><span class="subst">-</span><span class="number">02</span> ~<span class="subst">/</span><span class="built_in">.</span>emacs<span class="built_in">.</span>d
</code></pre><p>然后修改~/.emacs,把以下内容添加进去</p>
<pre><code><span class="comment">;;find-file-suggest</span>
<span class="list">(<span class="title">require</span> 'find-file-suggest)</span>
<span class="list">(<span class="title">global-set-key</span> <span class="collection">[<span class="list">(<span class="title">control</span> x)</span> <span class="list">(<span class="title"><span class="built_in">meta</span></span> f)</span>]</span> 'find-file-suggest)</span>
<span class="list">(<span class="title">global-set-key</span> <span class="collection">[<span class="list">(<span class="title">control</span> x)</span> <span class="list">(<span class="title"><span class="built_in">meta</span></span> g)</span>]</span> 'ffs-grep)</span>
</code></pre><p>然后就是要建立搜引，以下给出两个node工程和C/C++工程的例子</p>
<pre><code><span class="comment">;;c/c++ 工程创建索引(参数：别名, 工程目录, 要索引的文件名后缀, 要过滤的文件夹)</span>
<span class="list">(<span class="title">ffs-create-file-index</span> <span class="string">"ejoy"</span> <span class="string">"~/code/github/ejoy2d"</span> <span class="string">"\\.h\\|\\.c\\|\\.lua"</span> <span class="string">"\\doc$\\|\\.git$"</span>)</span>
<span class="comment">;;js/node.js 工程创建索引</span>
<span class="list">(<span class="title">ffs-create-file-index</span> <span class="string">"sails"</span> <span class="string">"/usr/local/lib/node_modules/sails/lib"</span> <span class="string">"\\.js\\|\\.ejs\\|\\.html"</span> <span class="string">""</span>)</span> 
</code></pre><p>用法：</p>
<pre><code>-<span class="ruby"> 打开emacs， 输入 <span class="string">"M-x ffs-use-file-index"</span> 回车
</span>-<span class="ruby"> 输入 ejoy2d(之前建立的工程别名) 回车
</span>-<span class="ruby"> <span class="string">"C-x M-f"</span> 之后会显示所有索引到的文件列表
</span>-<span class="ruby"> 直接输入想要查找的文件名（<span class="constant">C</span>-n 向下， <span class="constant">C</span>-p 向上），回车</span>
</code></pre><h2 id="highlight-parentheses_高亮显示配对的括号（不同颜色显示）">highlight-parentheses 高亮显示配对的括号（不同颜色显示）</h2>
<p>多层嵌套的问题，对刚学node的人来说会有些头疼，1个 tab 2个空格已经够头痛了，还多层嵌套 -_-!，</p>
<p>括号就更看不清了。所以把这个插件推荐给大家！（话说node嵌套问题，已经有了很多解决方案了 async, step, eventproxy&#x2026;有兴趣童鞋可以查找相关资料）</p>
<pre><code>$wget http://nschum<span class="preprocessor">.de</span>/src/emacs/highlight-parentheses/highlight-parentheses<span class="preprocessor">.el</span>
$<span class="keyword">cp</span> highlight-parentheses<span class="preprocessor">.el</span> ~/<span class="preprocessor">.emacs</span><span class="preprocessor">.d</span>
</code></pre><p>修改~/.emacs</p>
<pre><code>(<span class="keyword">require</span> <span class="string">'highlight-parentheses)
打开emacs
(M-x highlight-parentheses-mode) 来触发该功能</span>
</code></pre><h2 id="tramp_直接修改服务端代码或配置文件如同本地操作">tramp 直接修改服务端代码或配置文件如同本地操作</h2>
<p>emscs23 以上版本开始已经把tramp集成进去了，所以免额外的配置过程，直接使用。</p>
<h3 id="利用tramp提升root权限修改：">利用tramp提升root权限修改：</h3>
<pre><code>打开emacs
<span class="string">"C-x C-f"</span> 打开文件操作
<span class="string">"C-a C-k"</span> 删除当前路径
输入 /<span class="symbol">su:</span><span class="symbol">:/etc/</span> 按下 <span class="constant">Tab</span>按键
输入 密码 （当然， 前提是当前用户是 sudoer）
再次按下<span class="constant">Tab</span> 就能通过root访问所有文件了
</code></pre><h3 id="利用tramp修改远程服务器代码">利用tramp修改远程服务器代码</h3>
<pre><code><span class="string">"C-x C-f"</span> 打开文件操作
<span class="string">"C-a C-k"</span> 删除当前路径
输入 /luckyan315<span class="variable">@192</span>.<span class="number">168.3</span>.<span class="number">2</span><span class="symbol">:/home/</span> 按下<span class="constant">Tab</span>
按提示输入，第一次可能要建立ssh连接（反正按照提示输入yes 或者 y就行了），然后输入密码
再次按下<span class="constant">Tab</span> 就能访问远程服务器目录了 ^<span class="number">_</span>^
</code></pre><h2 id="yasnippet_提供各种语言的模板代码">yasnippet 提供各种语言的模板代码</h2>
<p>从TextMate继层过来的非常有用的一个功能，提供各种语言的模板代码。</p>
<pre><code>$wget http://yasnippet<span class="preprocessor">.googlecode</span><span class="preprocessor">.com</span>/files/yasnippet-<span class="number">0.6</span><span class="number">.1</span>c<span class="preprocessor">.tar</span><span class="preprocessor">.bz</span>2
$<span class="keyword">cp</span> yasnippet-<span class="number">0.6</span><span class="number">.1</span>c ~/<span class="preprocessor">.emacs</span><span class="preprocessor">.d</span>
$cd ~/<span class="preprocessor">.emacs</span><span class="preprocessor">.d</span>
$mv yasnippet-<span class="number">0.6</span><span class="number">.1</span>c yasnippet
</code></pre><p>修改~/.emacs</p>
<pre><code><span class="list">(<span class="title">add-to-list</span> 'load-path
             <span class="string">"~/.emacs.d/yasnippet"</span>)</span>
<span class="list">(<span class="title">require</span> 'yasnippet)</span> <span class="comment">;; not yasnippet-bundle</span>
<span class="list">(<span class="title">yas-global-mode</span> <span class="number">1</span>)</span>
</code></pre><p><strong>当我们安装js2-mode之后，我们需要手动创建一个js2-mode相关的snippets</strong></p>
<pre><code><span class="variable">$cd</span> ~<span class="subst">/</span><span class="built_in">.</span>emacs<span class="built_in">.</span>dyasnippet/snippets
<span class="variable">$cp</span> <span class="attribute">-r</span> js<span class="attribute">-mode</span> js2<span class="attribute">-mode</span>
</code></pre><h2 id="版本控制">版本控制</h2>
<h3 id="psvn_通过SVN管理你的代码">psvn 通过SVN管理你的代码</h3>
<p>前期原形代码很多人用svn来管理，使用过程中 用psvn个人感觉已经够用了</p>
<pre><code>$wget http://lifegoo<span class="preprocessor">.pluskid</span><span class="preprocessor">.org</span>/wiki/lisp/psvn<span class="preprocessor">.el</span>
$<span class="keyword">cp</span> ./psvn<span class="preprocessor">.el</span> ~/<span class="preprocessor">.emacs</span><span class="preprocessor">.d</span>
</code></pre><p>修改~/.emacs, 添加以下内容</p>
<pre><code><span class="comment">;;svn support</span>
<span class="list">(<span class="title">require</span> 'psvn)</span>
</code></pre><p>具体用法:</p>
<pre><code>g     <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-update</span>:               run <span class="string">'svn status -v'</span>
M<span class="attribute">-s</span>   <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-update</span>:               run <span class="string">'svn status -v'</span>
C<span class="attribute">-u</span> g <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-update</span>:               run <span class="string">'svn status -vu'</span>
<span class="subst">=</span>     <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-show</span><span class="attribute">-svn</span><span class="attribute">-diff</span>         run <span class="string">'svn diff'</span>
l     <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-show</span><span class="attribute">-svn</span><span class="attribute">-log</span>          run <span class="string">'svn log'</span>
i     <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-info</span>                  run <span class="string">'svn info'</span>
r     <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-revert</span>                run <span class="string">'svn revert'</span>
X v   <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-resolved</span>              run <span class="string">'svn resolved'</span>
U     <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-update</span><span class="attribute">-cmd</span>            run <span class="string">'svn update'</span>
M<span class="attribute">-u</span>   <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-update</span><span class="attribute">-cmd</span>            run <span class="string">'svn update'</span>
c     <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-commit</span>                run <span class="string">'svn commit'</span>
a     <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-add</span><span class="attribute">-file</span>              run <span class="string">'svn add --non-recursive'</span>
A     <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-add</span><span class="attribute">-file</span><span class="attribute">-recursively</span>  run <span class="string">'svn add'</span>
<span class="subst">+</span>     <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-make</span><span class="attribute">-directory</span>        run <span class="string">'svn mkdir'</span>
R     <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-mv</span>                    run <span class="string">'svn mv'</span>
D     <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-rm</span>                    run <span class="string">'svn rm'</span>
M<span class="attribute">-c</span>   <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-cleanup</span>               run <span class="string">'svn cleanup'</span>
b     <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-blame</span>                 run <span class="string">'svn blame'</span>
X e   <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-export</span>                run <span class="string">'svn export'</span>
RET   <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-find</span><span class="attribute">-file</span><span class="attribute">-or</span><span class="attribute">-examine</span><span class="attribute">-directory</span>
^     <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-examine</span><span class="attribute">-parent</span>
~     <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-get</span><span class="attribute">-specific</span><span class="attribute">-revision</span>
E     <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-ediff</span><span class="attribute">-with</span><span class="attribute">-revision</span>
X X   <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-resolve</span><span class="attribute">-conflicts</span>
s     <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-show</span><span class="attribute">-process</span><span class="attribute">-buffer</span>
e     <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-toggle</span><span class="attribute">-edit</span><span class="attribute">-cmd</span><span class="attribute">-flag</span>
<span class="subst">?</span>     <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-toggle</span><span class="attribute">-hide</span><span class="attribute">-unknown</span>
_     <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-toggle</span><span class="attribute">-hide</span><span class="attribute">-unmodified</span>
m     <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-set</span><span class="attribute">-user</span><span class="attribute">-mark</span>
u     <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-unset</span><span class="attribute">-user</span><span class="attribute">-mark</span>
$     <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-toggle</span><span class="attribute">-elide</span>
w     <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-copy</span><span class="attribute">-filename</span><span class="attribute">-as</span><span class="attribute">-kill</span>
DEL   <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-unset</span><span class="attribute">-user</span><span class="attribute">-mark</span><span class="attribute">-backwards</span>
<span class="subst">\*</span> <span class="subst">!</span>   <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-unset</span><span class="attribute">-all</span><span class="attribute">-usermarks</span>
<span class="subst">\*</span> <span class="subst">?</span>   <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-mark</span><span class="attribute">-unknown</span>
<span class="subst">\*</span> A   <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-mark</span><span class="attribute">-added</span>
<span class="subst">\*</span> M   <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-mark</span><span class="attribute">-modified</span>
<span class="subst">\*</span> D   <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-mark</span><span class="attribute">-deleted</span>
<span class="subst">\*</span> <span class="subst">*</span>   <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-mark</span><span class="attribute">-changed</span>
<span class="built_in">.</span>     <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-goto</span><span class="attribute">-root</span><span class="attribute">-or</span><span class="attribute">-return</span>
f     <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-find</span><span class="attribute">-file</span>
o     <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-find</span><span class="attribute">-file</span><span class="attribute">-other</span><span class="attribute">-window</span>
v     <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-view</span><span class="attribute">-file</span><span class="attribute">-other</span><span class="attribute">-window</span>
I     <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-parse</span><span class="attribute">-info</span>
V     <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-svnversion</span>
P l   <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-property</span><span class="attribute">-list</span>
P s   <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-property</span><span class="attribute">-set</span>
P d   <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-property</span><span class="attribute">-delete</span>
P e   <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-property</span><span class="attribute">-edit</span><span class="attribute">-one</span><span class="attribute">-entry</span>
P i   <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-property</span><span class="attribute">-ignore</span><span class="attribute">-file</span>
P I   <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-property</span><span class="attribute">-ignore</span><span class="attribute">-file</span><span class="attribute">-extension</span>
P C<span class="attribute">-i</span> <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-property</span><span class="attribute">-edit</span><span class="attribute">-svn</span><span class="attribute">-ignore</span>
P k   <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-property</span><span class="attribute">-set</span><span class="attribute">-keyword</span><span class="attribute">-list</span>
P y   <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-property</span><span class="attribute">-set</span><span class="attribute">-eol</span><span class="attribute">-style</span>
P x   <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-property</span><span class="attribute">-set</span><span class="attribute">-executable</span>
h     <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-use</span><span class="attribute">-history</span>
q     <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-bury</span><span class="attribute">-buffer</span>

C<span class="attribute">-x</span> C<span class="attribute">-j</span> <span class="subst">-</span> svn<span class="attribute">-status</span><span class="attribute">-dired</span><span class="attribute">-jump</span>
</code></pre><h3 id="git-emacs_通过git管理代码">git-emacs 通过git管理代码</h3>
<p>因为很多快捷键和 psvn 相同，如果熟悉了psvn，不需要记住额外的快捷键就可以使用git-emacs来完成常用操作了(是的，我们是懒惰的 -_-!)。</p>
<pre><code><span class="variable">$git</span> clone https:<span class="comment">//github.com/tsgates/git-emacs.git</span>
<span class="variable">$cp</span> git<span class="attribute">-emacs</span> ~<span class="subst">/</span><span class="built_in">.</span>emacs<span class="built_in">.</span>d
修改~<span class="subst">/</span><span class="built_in">.</span>emacs
(add<span class="attribute">-to</span><span class="attribute">-list</span> <span class="string">'load-path "~/.emacs.d/git-emacs/")
(require '</span>git<span class="attribute">-emacs</span>)
</code></pre><p>和psvn一样，进入“M-x git-status” 进入控制面板。</p>
<p>常用命令：</p>
<pre><code><span class="string">| Command | Comment                                  </span>

<span class="string">| p/n     | 在所有文件之间上下移动        </span>

<span class="string">| P/N     | 在变更过的文件之间上下移动  </span>

<span class="string">| &lt;/&gt;     | 定位到列表的头部/尾部          </span>

<span class="string">| v       | 以只读方式打开文件              </span>

<span class="string">| m/u/SPC | 设置/取消/切换标记，标记用于批量处理文件 </span>

<span class="string">| a       | 将文件加入版本控制              </span>

<span class="string">| i       | 将文件加入ignore                    </span>

<span class="string">| c       | 提交                                     </span>
</code></pre><h2 id="Unit_Test">Unit Test</h2>
<h3 id="Mocha_yas_模板">Mocha yas 模板</h3>
<p>因为我们之前安装了 yasnippet ，所以很多模板我们都可以网上找得到，以下是mocha 单元测试相关的模板</p>
<pre><code><span class="variable">$git</span> clone https:<span class="comment">//github.com/jamescarr/mochajs-snippets.git</span>
<span class="variable">$cp</span> <span class="attribute">-r</span> mochajs<span class="attribute">-snippets</span>/javascript<span class="comment">/* ~/.emacs.d/yasnippet/snippet/js2-mode
如果已经打开emacs （重新打开时候自动reload）
"M-x yas-reload-all" 
就可以使用各种断言模板了，非常便利^^</span>
</code></pre><h1 id="总结">总结</h1>
<p>以上所有涉及到的文件，都可以在 <a href="https://github.com/luckyan315/site-lisp" target="_blank">https://github.com/luckyan315/site-lisp</a> 这里找到，希望这个文章对大家学习 node 或者 emacs 有所帮助!<br>今天就到这里，改天继续^^</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://luckyan315.github.io/2014/05/10/用emacs打造nodejs开发环境/" data-id="96x9dnear4flh34z" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/08/hello-world/" class="article-date">
  <time datetime="2014-05-08T08:52:18.000Z" itemprop="datePublished">May 8 2014</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/08/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="http://hexo.io" target="_blank">Hexo</a>! This is your very first post. Check <a href="http://hexo.io/docs" target="_blank">documentation</a> to learn how to use.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://luckyan315.github.io/2014/05/08/hello-world/" data-id="qiltyu0xlvxn1ywl" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
  
</section>
        
          <aside id="sidebar">
  
    
  
    
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05">May 2014</a><span class="archive-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2014/05/10/用emacs打造nodejs开发环境/">用emacs打造node.js开发环境</a>
          </li>
        
          <li>
            <a href="/2014/05/08/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2014 luckyan315<br>
      Powered by <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>


<script type="text/javascript" src="/js/script.js"></script>
  </div>
</body>
</html>